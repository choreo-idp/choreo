{{ if .Values.choreoDefaultValues.enableDefaultOrgAndProject }}
{{- range .Values.choreoDefaultValues.Environments }}
---
apiVersion: openchoreo.dev/v1alpha1
kind: Environment
metadata:
  name: {{ .name }}
  namespace: {{ .namespace }}
  annotations:
    openchoreo.dev/display-name: {{ .displayName }}
    openchoreo.dev/description: {{ .displayName }}
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "9"
  labels:
    openchoreo.dev/organization: {{ .organization }}
    openchoreo.dev/name: {{ .name }}
spec:
  dataPlaneRef: {{ $.Values.choreoDefaultValues.dataPlane.name }}
  isProduction: {{ .isCritical }}
  gateway:
    dnsPrefix: {{ .dnsPrefix }}
{{- end }}
{{ end }}
